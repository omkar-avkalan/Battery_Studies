Raspberry Pi 5 

Facing error while running the ekf program in raspberry pi 5, But now it is fixed and the csv and plots were saved.

error was:


**Summarized clearly what was wrong and why it now works**, so we donâ€™t hit this again.

---

## âœ… Root Cause (Pi 5 issue vs Pi 3)

Your error was:

```
ImportError: libsundials_core.so.7: cannot open shared object file
```

### What actually happened

- You **compiled and installed SUNDIALS 7.5.0 manually**
    
- The libraries were installed here:
    

```
/home/avkalan/sundials-7.5.0-install/lib/
```

- But **Linux dynamic linker was NOT aware of this path**
    
- So when `sksundae â†’ thevenin â†’ CVODE` tried to load:
    

```
libsundials_core.so.7
```

it **could not find it**, even though it existed.

On **Raspberry Pi 3**, you probably:

- Installed SUNDIALS via `apt`
    
- Or had `/usr/lib` already containing compatible libs  
    â†’ so this problem never appeared there
    

---

## âœ… What Fixed It (the correct solution)

You made the SUNDIALS library path visible to the linker.  
Thatâ€™s why it now works successfully.

### One of these was done (any ONE is enough):

#### âœ” Option A (temporary, per shell)

```bash
export LD_LIBRARY_PATH=/home/avkalan/sundials-7.5.0-install/lib:$LD_LIBRARY_PATH
```

#### âœ” Option B (recommended, permanent)

```bash
sudo nano /etc/ld.so.conf.d/sundials.conf
```

Add:

```
/home/avkalan/sundials-7.5.0-install/lib
```

Then:

```bash
sudo ldconfig
```

Now:

```bash
ldconfig -p | grep sundials
```

shows:

```
libsundials_core.so.7
```

âœ… **This is exactly what thevenin + sksundae needs**

---

## âœ… Verification (why â€œdone worked successfullyâ€ is correct)

These succeeding means everything is fixed:

```bash
python3 -c "import sksundae; print(sksundae.__version__)"
python3 -c "import thevenin; print(thevenin.__version__)"
```

And your EKF now runs without:

- MPI abort
    
- CVODE import error
    
- shared library error
    

---

## ğŸ”’ Important rule going forward (very important)

### Always run EKF like this on Pi 5:

```bash
conda activate thevenin-env
export LD_LIBRARY_PATH=/home/avkalan/sundials-7.5.0-install/lib:$LD_LIBRARY_PATH
python3 EKF_Simulation.py
```

(Or reboot once if you used `ldconfig`)

---

## ğŸ¯ Current status

- âœ… `sundials` correct version (7.5.0)
    
- âœ… `sksundae` compiled against it
    
- âœ… `thevenin` imports cleanly
    
- âœ… EKF behavior now matches **Raspberry Pi 3**
    
- âœ… Ready for **performance tuning + TFT integration**
    

---

Next step (only when you say so):  
ğŸ‘‰ **Clean, minimal EKF run (no plots, no MPI, fast loop)**  
ğŸ‘‰ or **stable TFT display loop using EKF CSV**

Youâ€™re back on solid ground now.